import{s as B,e as Y,f as Z,g as he,o as pe,p as ie,h as de,u as ke,i as $e,j as we,t as A,b as R,c as be}from"./scheduler.B75WiLcw.js";import{S as D,i as G,k as v,l as H,m as I,n as $,o as w,p as S,s as J,f as K,g as C,d as p,t as Q,b as X,j as ve,q as x,e as O,c as U,a as j,x as W,y as V,h as ae,F as He,u as Ie,v as Se,r as Ce}from"./index.BlaBql7q.js";import{S as oe}from"./Section.CZYiNMFb.js";import{A as Te,e as ee,u as Ee,o as ye}from"./Avatar.BHAtAR2s.js";import"./UserAvatarsList.svelte_svelte_type_style_lang.DSH-q4d8.js";import{S as fe,T as te}from"./Stack.DK-1dCKL.js";import"./Stack.svelte_svelte_type_style_lang.BvmJlThE.js";import{g as se}from"./index.C_e-w6W-.js";import{p as Le}from"./stores.CZxodfKR.js";function Ne(l){let e;return{c(){e=Q(l[0])},l(s){e=X(s,l[0])},m(s,t){C(s,e,t)},p(s,t){t&1&&ve(e,s[0])},d(s){s&&p(e)}}}function Ve(l){let e;return{c(){e=Q("Оффлайн")},l(s){e=X(s,"Оффлайн")},m(s,t){C(s,e,t)},d(s){s&&p(e)}}}function Me(l){let e;return{c(){e=Q("Это вы")},l(s){e=X(s,"Это вы")},m(s,t){C(s,e,t)},d(s){s&&p(e)}}}function Pe(l){let e;function s(n,i){return n[1]?Me:Ve}let t=s(l),r=t(l);return{c(){r.c(),e=x()},l(n){r.l(n),e=x()},m(n,i){r.m(n,i),C(n,e,i)},p(n,i){t!==(t=s(n))&&(r.d(1),r=t(n),r&&(r.c(),r.m(e.parentNode,e)))},d(n){n&&p(e),r.d(n)}}}function ze(l){let e,s,t,r;return e=new te({props:{role:"main",$$slots:{default:[Ne]},$$scope:{ctx:l}}}),t=new te({props:{role:"secondary",$$slots:{default:[Pe]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),s=J(),v(t.$$.fragment)},l(n){H(e.$$.fragment,n),s=K(n),H(t.$$.fragment,n)},m(n,i){I(e,n,i),C(n,s,i),I(t,n,i),r=!0},p(n,i){const o={};i&65&&(o.$$scope={dirty:i,ctx:n}),e.$set(o);const a={};i&66&&(a.$$scope={dirty:i,ctx:n}),t.$set(a)},i(n){r||($(e.$$.fragment,n),$(t.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),w(t.$$.fragment,n),r=!1},d(n){n&&p(s),S(e,n),S(t,n)}}}function Fe(l){let e,s,t,r;return e=new Te({props:{src:l[2]}}),t=new fe({props:{direction:"vertical",$$slots:{default:[ze]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),s=J(),v(t.$$.fragment)},l(n){H(e.$$.fragment,n),s=K(n),H(t.$$.fragment,n)},m(n,i){I(e,n,i),C(n,s,i),I(t,n,i),r=!0},p(n,i){const o={};i&4&&(o.src=n[2]),e.$set(o);const a={};i&67&&(a.$$scope={dirty:i,ctx:n}),t.$set(a)},i(n){r||($(e.$$.fragment,n),$(t.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),w(t.$$.fragment,n),r=!1},d(n){n&&p(s),S(e,n),S(t,n)}}}function Oe(l){let e,s;return e=new fe({props:{gap:"10",align:"center",$$slots:{default:[Fe]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,r){I(e,t,r),s=!0},p(t,r){const n={};r&71&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){w(e.$$.fragment,t),s=!1},d(t){S(e,t)}}}function Ue(l){let e,s;return e=new oe({props:{class:l[4].class,$$slots:{default:[Oe]},$$scope:{ctx:l}}}),e.$on("click",l[3]),{c(){v(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,r){I(e,t,r),s=!0},p(t,[r]){const n={};r&16&&(n.class=t[4].class),r&71&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){w(e.$$.fragment,t),s=!1},d(t){S(e,t)}}}function je(l,e,s){const t=["name","userId","isCurrent","src"];let r=Y(e,t),{name:n}=e,{userId:i}=e,{isCurrent:o=!1}=e,{src:a}=e;function h(){o?se("/profile"):se("/user",{userForId:i})}return l.$$set=m=>{e=Z(Z({},e),he(m)),s(4,r=Y(e,t)),"name"in m&&s(0,n=m.name),"userId"in m&&s(5,i=m.userId),"isCurrent"in m&&s(1,o=m.isCurrent),"src"in m&&s(2,a=m.src)},[n,o,a,h,r,i]}class qe extends D{constructor(e){super(),G(this,e,je,Ue,B,{name:0,userId:5,isCurrent:1,src:2})}}function ne(l,e,s){const t=l.slice();return t[22]=e[s],t}const Ae=l=>({item:l&64}),re=l=>({item:l[22].data});function le(l,e){let s,t,r;const n=e[14].default,i=de(n,e,e[13],re);return{key:l,first:null,c(){s=O("vl-row"),i&&i.c(),t=J(),this.h()},l(o){s=U(o,"VL-ROW",{class:!0});var a=j(s);i&&i.l(a),t=K(a),a.forEach(p),this.h()},h(){W(s,"class","svelte-mwk0e5"),this.first=s},m(o,a){C(o,s,a),i&&i.m(s,null),ae(s,t),r=!0},p(o,a){e=o,i&&i.p&&(!r||a&8256)&&ke(i,n,e,e[13],r?we(n,e[13],a,Ae):$e(e[13]),re)},i(o){r||($(i,o),r=!0)},o(o){w(i,o),r=!1},d(o){o&&p(s),i&&i.d(o)}}}function Re(l){let e,s,t=[],r=new Map,n=`${l[4]}px`,i=`${l[5]}px`,o,a,h,m,b=ee(l[6]);const E=f=>f[22].index;for(let f=0;f<b.length;f+=1){let c=ne(l,b,f),g=E(c);r.set(g,t[f]=le(g,c))}return{c(){e=O("vl-viewport"),s=O("vl-contents");for(let f=0;f<t.length;f+=1)t[f].c();this.h()},l(f){e=U(f,"VL-VIEWPORT",{class:!0});var c=j(e);s=U(c,"VL-CONTENTS",{class:!0});var g=j(s);for(let k=0;k<t.length;k+=1)t[k].l(g);g.forEach(p),c.forEach(p),this.h()},h(){W(s,"class","svelte-mwk0e5"),V(s,"padding-top",n),V(s,"padding-bottom",i),W(e,"class","svelte-mwk0e5"),pe(()=>l[17].call(e)),V(e,"height",l[0])},m(f,c){C(f,e,c),ae(e,s);for(let g=0;g<t.length;g+=1)t[g]&&t[g].m(s,null);l[15](s),l[16](e),o=He(e,l[17].bind(e)),a=!0,h||(m=Ie(e,"scroll",l[7]),h=!0)},p(f,[c]){c&8256&&(b=ee(f[6]),Se(),t=Ee(t,c,E,1,f,b,r,s,ye,le,null,ne),Ce()),c&16&&n!==(n=`${f[4]}px`)&&V(s,"padding-top",n),c&32&&i!==(i=`${f[5]}px`)&&V(s,"padding-bottom",i),c&1&&V(e,"height",f[0])},i(f){if(!a){for(let c=0;c<b.length;c+=1)$(t[c]);a=!0}},o(f){for(let c=0;c<t.length;c+=1)w(t[c]);a=!1},d(f){f&&p(e);for(let c=0;c<t.length;c+=1)t[c].d();l[15](null),l[16](null),o(),h=!1,m()}}}function We(l,e,s){let t,{$$slots:r={},$$scope:n}=e,{items:i}=e,{itemHeight:o=0}=e,{height:a="100%"}=e,{end:h=0}=e,{start:m=0}=e,b=!1,E,f,c=0,g,k=[],z=0,q=0,y;async function ce(u,N,d){const{scrollTop:T}=g;await A();let M=z-T,_=m;for(;M<N&&_<u.length;){let P=f[_-m];P||(s(8,h=_+1),await A(),P=f[_-m]);const L=k[_]=d||P.offsetHeight;M+=L,_+=1}s(8,h=_);const F=u.length-h;y=(z+M)/h,s(5,q=F*y),k.length=u.length}async function ue(){const{scrollTop:u}=g,N=m;for(let _=0;_<f.length;_+=1)k[m+_]=o||f[_].offsetHeight;let d=0,T=0;for(;d<i.length;){const _=k[d]||y;if(T+_>u){s(9,m=d),s(4,z=T);break}T+=_,d+=1}for(;d<i.length&&(T+=k[d]||y,d+=1,!(T>u+c)););s(8,h=d);const M=i.length-h;for(y=T/h;d<i.length;)k[d++]=y;if(s(5,q=M*y),m<N){await A();let _=0,F=0;for(let L=m;L<N;L+=1)f[L-m]&&(F+=k[L],_+=o||f[L-m].offsetHeight);const P=_-F;g.scrollTo(0,u+P)}}ie(()=>{f=E.getElementsByTagName("vl-row"),s(12,b=!0)});function me(u){R[u?"unshift":"push"](()=>{E=u,s(2,E)})}function _e(u){R[u?"unshift":"push"](()=>{g=u,s(3,g)})}function ge(){c=this.offsetHeight,s(1,c)}return l.$$set=u=>{"items"in u&&s(10,i=u.items),"itemHeight"in u&&s(11,o=u.itemHeight),"height"in u&&s(0,a=u.height),"end"in u&&s(8,h=u.end),"start"in u&&s(9,m=u.start),"$$scope"in u&&s(13,n=u.$$scope)},l.$$.update=()=>{l.$$.dirty&1792&&s(6,t=i.slice(m,h).map((u,N)=>({index:N+m,data:u}))),l.$$.dirty&7170&&b&&ce(i,c,o)},[a,c,E,g,z,q,t,ue,h,m,i,o,b,n,r,me,_e,ge]}class Be extends D{constructor(e){super(),G(this,e,We,Re,B,{items:10,itemHeight:11,height:0,end:8,start:9})}}function De(l){let e,s;return e=new qe({props:{userId:l[5].meta.id,name:l[5].meta.userName,src:l[5].meta.photoLink||"",isCurrent:String(l[5].meta.id)===l[3].url.searchParams.get("userId")}}),{c(){v(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,r){I(e,t,r),s=!0},p(t,r){const n={};r&32&&(n.userId=t[5].meta.id),r&32&&(n.name=t[5].meta.userName),r&32&&(n.src=t[5].meta.photoLink||""),r&40&&(n.isCurrent=String(t[5].meta.id)===t[3].url.searchParams.get("userId")),e.$set(n)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){w(e.$$.fragment,t),s=!1},d(t){S(e,t)}}}function Ge(l){let e,s;return e=new Be({props:{items:l[0],height:l[1]-10+"px",$$slots:{default:[De,({item:t})=>({5:t}),({item:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,r){I(e,t,r),s=!0},p(t,r){const n={};r&1&&(n.items=t[0]),r&2&&(n.height=t[1]-10+"px"),r&104&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){w(e.$$.fragment,t),s=!1},d(t){S(e,t)}}}function Je(l){let e,s,t;return s=new oe({props:{type:"main",$$slots:{default:[Ge]},$$scope:{ctx:l}}}),{c(){e=O("div"),v(s.$$.fragment)},l(r){e=U(r,"DIV",{});var n=j(e);H(s.$$.fragment,n),n.forEach(p)},m(r,n){C(r,e,n),I(s,e,null),l[4](e),t=!0},p(r,[n]){const i={};n&75&&(i.$$scope={dirty:n,ctx:r}),s.$set(i)},i(r){t||($(s.$$.fragment,r),t=!0)},o(r){w(s.$$.fragment,r),t=!1},d(r){r&&p(e),S(s),l[4](null)}}}function Ke(l,e,s){let t;be(l,Le,a=>s(3,t=a));let{users:r}=e,n=0,i;ie(()=>{var a;s(1,n=((a=i.parentElement)==null?void 0:a.offsetHeight)||0)});function o(a){R[a?"unshift":"push"](()=>{i=a,s(2,i)})}return l.$$set=a=>{"users"in a&&s(0,r=a.users)},[r,n,i,t,o]}class rt extends D{constructor(e){super(),G(this,e,Ke,Je,B,{users:0})}}export{rt as U};
