import{s as B,e as Y,h as Z,j as he,x as de,v as ae,k as pe,u as ke,l as we,m as $e,w as F,b as R,c as be}from"./scheduler.BAuVadtp.js";import{S as D,i as G,k as v,l as H,m as I,n as w,o as $,p as S,s as J,f as K,g as C,d,t as Q,b as X,j as ve,w as x,e as U,c as j,a as q,x as W,z as V,h as ie,H as He,q as Ie,u as Se,v as Ce}from"./index.BX_zT-d1.js";import{S as oe}from"./Section.Brb7WJTZ.js";import{A as Te,e as ee,u as Ee,o as Le}from"./Avatar.ARXkGQrK.js";import"./UserAvatarsList.svelte_svelte_type_style_lang.CazUwnNA.js";import{S as fe,T as te}from"./Stack.B16WhLmd.js";import{a as se}from"./index.CEh0bFHg.js";import{p as ye}from"./stores.7o3g_oFy.js";function Ne(l){let e;return{c(){e=Q(l[0])},l(s){e=X(s,l[0])},m(s,t){C(s,e,t)},p(s,t){t&1&&ve(e,s[0])},d(s){s&&d(e)}}}function Ve(l){let e;return{c(){e=Q("Оффлайн")},l(s){e=X(s,"Оффлайн")},m(s,t){C(s,e,t)},d(s){s&&d(e)}}}function ze(l){let e;return{c(){e=Q("Это вы")},l(s){e=X(s,"Это вы")},m(s,t){C(s,e,t)},d(s){s&&d(e)}}}function Me(l){let e;function s(n,a){return n[1]?ze:Ve}let t=s(l),r=t(l);return{c(){r.c(),e=x()},l(n){r.l(n),e=x()},m(n,a){r.m(n,a),C(n,e,a)},p(n,a){t!==(t=s(n))&&(r.d(1),r=t(n),r&&(r.c(),r.m(e.parentNode,e)))},d(n){n&&d(e),r.d(n)}}}function Pe(l){let e,s,t,r;return e=new te({props:{role:"main",$$slots:{default:[Ne]},$$scope:{ctx:l}}}),t=new te({props:{role:"secondary",$$slots:{default:[Me]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),s=J(),v(t.$$.fragment)},l(n){H(e.$$.fragment,n),s=K(n),H(t.$$.fragment,n)},m(n,a){I(e,n,a),C(n,s,a),I(t,n,a),r=!0},p(n,a){const o={};a&65&&(o.$$scope={dirty:a,ctx:n}),e.$set(o);const i={};a&66&&(i.$$scope={dirty:a,ctx:n}),t.$set(i)},i(n){r||(w(e.$$.fragment,n),w(t.$$.fragment,n),r=!0)},o(n){$(e.$$.fragment,n),$(t.$$.fragment,n),r=!1},d(n){n&&d(s),S(e,n),S(t,n)}}}function Oe(l){let e,s,t,r;return e=new Te({props:{src:l[2]}}),t=new fe({props:{direction:"vertical",$$slots:{default:[Pe]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),s=J(),v(t.$$.fragment)},l(n){H(e.$$.fragment,n),s=K(n),H(t.$$.fragment,n)},m(n,a){I(e,n,a),C(n,s,a),I(t,n,a),r=!0},p(n,a){const o={};a&4&&(o.src=n[2]),e.$set(o);const i={};a&67&&(i.$$scope={dirty:a,ctx:n}),t.$set(i)},i(n){r||(w(e.$$.fragment,n),w(t.$$.fragment,n),r=!0)},o(n){$(e.$$.fragment,n),$(t.$$.fragment,n),r=!1},d(n){n&&d(s),S(e,n),S(t,n)}}}function Ue(l){let e,s;return e=new fe({props:{gap:"10",align:"center",$$slots:{default:[Oe]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,r){I(e,t,r),s=!0},p(t,r){const n={};r&71&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){s||(w(e.$$.fragment,t),s=!0)},o(t){$(e.$$.fragment,t),s=!1},d(t){S(e,t)}}}function je(l){let e,s;return e=new oe({props:{class:l[4].class,$$slots:{default:[Ue]},$$scope:{ctx:l}}}),e.$on("click",l[3]),{c(){v(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,r){I(e,t,r),s=!0},p(t,[r]){const n={};r&16&&(n.class=t[4].class),r&71&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){s||(w(e.$$.fragment,t),s=!0)},o(t){$(e.$$.fragment,t),s=!1},d(t){S(e,t)}}}function qe(l,e,s){const t=["name","userId","isCurrent","src"];let r=Y(e,t),{name:n}=e,{userId:a}=e,{isCurrent:o=!1}=e,{src:i}=e;function h(){o?se("/profile"):se("/user",{userForId:a})}return l.$$set=m=>{e=Z(Z({},e),he(m)),s(4,r=Y(e,t)),"name"in m&&s(0,n=m.name),"userId"in m&&s(5,a=m.userId),"isCurrent"in m&&s(1,o=m.isCurrent),"src"in m&&s(2,i=m.src)},[n,o,i,h,r,a]}class Ae extends D{constructor(e){super(),G(this,e,qe,je,B,{name:0,userId:5,isCurrent:1,src:2})}}function ne(l,e,s){const t=l.slice();return t[22]=e[s],t}const Fe=l=>({item:l&64}),re=l=>({item:l[22].data});function le(l,e){let s,t,r;const n=e[14].default,a=pe(n,e,e[13],re);return{key:l,first:null,c(){s=U("vl-row"),a&&a.c(),t=J(),this.h()},l(o){s=j(o,"VL-ROW",{class:!0});var i=q(s);a&&a.l(i),t=K(i),i.forEach(d),this.h()},h(){W(s,"class","svelte-mwk0e5"),this.first=s},m(o,i){C(o,s,i),a&&a.m(s,null),ie(s,t),r=!0},p(o,i){e=o,a&&a.p&&(!r||i&8256)&&ke(a,n,e,e[13],r?$e(n,e[13],i,Fe):we(e[13]),re)},i(o){r||(w(a,o),r=!0)},o(o){$(a,o),r=!1},d(o){o&&d(s),a&&a.d(o)}}}function Re(l){let e,s,t=[],r=new Map,n=`${l[4]}px`,a=`${l[5]}px`,o,i,h,m,b=ee(l[6]);const E=f=>f[22].index;for(let f=0;f<b.length;f+=1){let c=ne(l,b,f),g=E(c);r.set(g,t[f]=le(g,c))}return{c(){e=U("vl-viewport"),s=U("vl-contents");for(let f=0;f<t.length;f+=1)t[f].c();this.h()},l(f){e=j(f,"VL-VIEWPORT",{class:!0});var c=q(e);s=j(c,"VL-CONTENTS",{class:!0});var g=q(s);for(let k=0;k<t.length;k+=1)t[k].l(g);g.forEach(d),c.forEach(d),this.h()},h(){W(s,"class","svelte-mwk0e5"),V(s,"padding-top",n),V(s,"padding-bottom",a),W(e,"class","svelte-mwk0e5"),de(()=>l[17].call(e)),V(e,"height",l[0])},m(f,c){C(f,e,c),ie(e,s);for(let g=0;g<t.length;g+=1)t[g]&&t[g].m(s,null);l[15](s),l[16](e),o=He(e,l[17].bind(e)),i=!0,h||(m=Ie(e,"scroll",l[7]),h=!0)},p(f,[c]){c&8256&&(b=ee(f[6]),Se(),t=Ee(t,c,E,1,f,b,r,s,Le,le,null,ne),Ce()),c&16&&n!==(n=`${f[4]}px`)&&V(s,"padding-top",n),c&32&&a!==(a=`${f[5]}px`)&&V(s,"padding-bottom",a),c&1&&V(e,"height",f[0])},i(f){if(!i){for(let c=0;c<b.length;c+=1)w(t[c]);i=!0}},o(f){for(let c=0;c<t.length;c+=1)$(t[c]);i=!1},d(f){f&&d(e);for(let c=0;c<t.length;c+=1)t[c].d();l[15](null),l[16](null),o(),h=!1,m()}}}function We(l,e,s){let t,{$$slots:r={},$$scope:n}=e,{items:a}=e,{itemHeight:o=0}=e,{height:i="100%"}=e,{end:h=0}=e,{start:m=0}=e,b=!1,E,f,c=0,g,k=[],P=0,A=0,L;async function ce(u,N,p){const{scrollTop:T}=g;await F();let z=P-T,_=m;for(;z<N&&_<u.length;){let M=f[_-m];M||(s(8,h=_+1),await F(),M=f[_-m]);const y=k[_]=p||M.offsetHeight;z+=y,_+=1}s(8,h=_);const O=u.length-h;L=(P+z)/h,s(5,A=O*L),k.length=u.length}async function ue(){const{scrollTop:u}=g,N=m;for(let _=0;_<f.length;_+=1)k[m+_]=o||f[_].offsetHeight;let p=0,T=0;for(;p<a.length;){const _=k[p]||L;if(T+_>u){s(9,m=p),s(4,P=T);break}T+=_,p+=1}for(;p<a.length&&(T+=k[p]||L,p+=1,!(T>u+c)););s(8,h=p);const z=a.length-h;for(L=T/h;p<a.length;)k[p++]=L;if(s(5,A=z*L),m<N){await F();let _=0,O=0;for(let y=m;y<N;y+=1)f[y-m]&&(O+=k[y],_+=o||f[y-m].offsetHeight);const M=_-O;g.scrollTo(0,u+M)}}ae(()=>{f=E.getElementsByTagName("vl-row"),s(12,b=!0)});function me(u){R[u?"unshift":"push"](()=>{E=u,s(2,E)})}function _e(u){R[u?"unshift":"push"](()=>{g=u,s(3,g)})}function ge(){c=this.offsetHeight,s(1,c)}return l.$$set=u=>{"items"in u&&s(10,a=u.items),"itemHeight"in u&&s(11,o=u.itemHeight),"height"in u&&s(0,i=u.height),"end"in u&&s(8,h=u.end),"start"in u&&s(9,m=u.start),"$$scope"in u&&s(13,n=u.$$scope)},l.$$.update=()=>{l.$$.dirty&1792&&s(6,t=a.slice(m,h).map((u,N)=>({index:N+m,data:u}))),l.$$.dirty&7170&&b&&ce(a,c,o)},[i,c,E,g,P,A,t,ue,h,m,a,o,b,n,r,me,_e,ge]}class Be extends D{constructor(e){super(),G(this,e,We,Re,B,{items:10,itemHeight:11,height:0,end:8,start:9})}}function De(l){let e,s;return e=new Ae({props:{userId:l[5].meta.id,name:l[5].meta.userName,src:l[5].meta.photoLink||"",isCurrent:String(l[5].meta.id)===l[3].url.searchParams.get("userId")}}),{c(){v(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,r){I(e,t,r),s=!0},p(t,r){const n={};r&32&&(n.userId=t[5].meta.id),r&32&&(n.name=t[5].meta.userName),r&32&&(n.src=t[5].meta.photoLink||""),r&40&&(n.isCurrent=String(t[5].meta.id)===t[3].url.searchParams.get("userId")),e.$set(n)},i(t){s||(w(e.$$.fragment,t),s=!0)},o(t){$(e.$$.fragment,t),s=!1},d(t){S(e,t)}}}function Ge(l){let e,s;return e=new Be({props:{items:l[0],height:l[1]-10+"px",$$slots:{default:[De,({item:t})=>({5:t}),({item:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,r){I(e,t,r),s=!0},p(t,r){const n={};r&1&&(n.items=t[0]),r&2&&(n.height=t[1]-10+"px"),r&104&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){s||(w(e.$$.fragment,t),s=!0)},o(t){$(e.$$.fragment,t),s=!1},d(t){S(e,t)}}}function Je(l){let e,s,t;return s=new oe({props:{type:"main",$$slots:{default:[Ge]},$$scope:{ctx:l}}}),{c(){e=U("div"),v(s.$$.fragment)},l(r){e=j(r,"DIV",{});var n=q(e);H(s.$$.fragment,n),n.forEach(d)},m(r,n){C(r,e,n),I(s,e,null),l[4](e),t=!0},p(r,[n]){const a={};n&75&&(a.$$scope={dirty:n,ctx:r}),s.$set(a)},i(r){t||(w(s.$$.fragment,r),t=!0)},o(r){$(s.$$.fragment,r),t=!1},d(r){r&&d(e),S(s),l[4](null)}}}function Ke(l,e,s){let t;be(l,ye,i=>s(3,t=i));let{users:r}=e,n=0,a;ae(()=>{var i;s(1,n=((i=a.parentElement)==null?void 0:i.offsetHeight)||0)});function o(i){R[i?"unshift":"push"](()=>{a=i,s(2,a)})}return l.$$set=i=>{"users"in i&&s(0,r=i.users)},[r,n,a,t,o]}class nt extends D{constructor(e){super(),G(this,e,Ke,Je,B,{users:0})}}export{nt as U};
