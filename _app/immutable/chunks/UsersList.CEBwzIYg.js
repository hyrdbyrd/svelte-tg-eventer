import{s as B,e as Z,c as de,q as D,h as x,j as $e,b as O,n as we,w as ke,k as be,u as ve,l as Ee,m as He,t as F}from"./scheduler.CxJaiRdw.js";import{S as G,i as J,e as A,k as H,c as j,a as C,l as S,d as h,x as U,g as w,m as T,q as oe,n as b,o as v,p as y,s as K,f as Q,z as L,t as X,b as Y,j as ie,w as ee,h as fe,F as Se,u as Te,v as ye}from"./index.xbAWuAcx.js";import{S as ce}from"./Section.BZeGjEA8.js";import{A as Ve,e as te,u as Le,o as Ne}from"./Avatar.T90XDUcY.js";import"./UserAvatarsList.svelte_svelte_type_style_lang.DRiWV5ZU.js";import{p as Re}from"./stores.Crk6R3vq.js";import{S as ue,T as se}from"./Stack.CIuyh2fQ.js";import{a as ne}from"./index.BtADSGMu.js";function Ae(l){let e;return{c(){e=X(l[5])},l(t){e=Y(t,l[5])},m(t,s){w(t,e,s)},p(t,s){s&32&&ie(e,t[5])},d(t){t&&h(e)}}}function je(l){let e=l[0].meta.description+"",t;return{c(){t=X(e)},l(s){t=Y(s,e)},m(s,r){w(s,t,r)},p(s,r){r&1&&e!==(e=s[0].meta.description+"")&&ie(t,e)},d(s){s&&h(t)}}}function Ce(l){let e;return{c(){e=X("Это вы")},l(t){e=Y(t,"Это вы")},m(t,s){w(t,e,s)},p:we,d(t){t&&h(e)}}}function Pe(l){let e;function t(n,a){return n[3]?Ce:je}let s=t(l),r=s(l);return{c(){r.c(),e=ee()},l(n){r.l(n),e=ee()},m(n,a){r.m(n,a),w(n,e,a)},p(n,a){s===(s=t(n))&&r?r.p(n,a):(r.d(1),r=s(n),r&&(r.c(),r.m(e.parentNode,e)))},d(n){n&&h(e),r.d(n)}}}function Ue(l){let e,t,s,r;return e=new se({props:{role:"main",truncate:!0,$$slots:{default:[Ae]},$$scope:{ctx:l}}}),s=new se({props:{role:"secondary",truncate:!0,$$slots:{default:[Pe]},$$scope:{ctx:l}}}),{c(){H(e.$$.fragment),t=K(),H(s.$$.fragment)},l(n){S(e.$$.fragment,n),t=Q(n),S(s.$$.fragment,n)},m(n,a){T(e,n,a),w(n,t,a),T(s,n,a),r=!0},p(n,a){const o={};a&1056&&(o.$$scope={dirty:a,ctx:n}),e.$set(o);const f={};a&1033&&(f.$$scope={dirty:a,ctx:n}),s.$set(f)},i(n){r||(b(e.$$.fragment,n),b(s.$$.fragment,n),r=!0)},o(n){v(e.$$.fragment,n),v(s.$$.fragment,n),r=!1},d(n){n&&h(t),y(e,n),y(s,n)}}}function We(l){let e,t,s,r,n,a;return t=new Ve({props:{src:l[4]}}),n=new ue({props:{direction:"vertical",$$slots:{default:[Ue]},$$scope:{ctx:l}}}),{c(){e=A("user-avatar"),H(t.$$.fragment),s=K(),r=A("user-content"),H(n.$$.fragment),this.h()},l(o){e=j(o,"USER-AVATAR",{class:!0});var f=C(e);S(t.$$.fragment,f),f.forEach(h),s=Q(o),r=j(o,"USER-CONTENT",{class:!0});var _=C(r);S(n.$$.fragment,_),_.forEach(h),this.h()},h(){U(e,"class","svelte-ppj746"),U(r,"class","svelte-ppj746"),L(r,"max-width",`${l[1]-80}px`)},m(o,f){w(o,e,f),T(t,e,null),w(o,s,f),w(o,r,f),T(n,r,null),a=!0},p(o,f){const _={};f&16&&(_.src=o[4]),t.$set(_);const m={};f&1065&&(m.$$scope={dirty:f,ctx:o}),n.$set(m),f&2&&L(r,"max-width",`${o[1]-80}px`)},i(o){a||(b(t.$$.fragment,o),b(n.$$.fragment,o),a=!0)},o(o){v(t.$$.fragment,o),v(n.$$.fragment,o),a=!1},d(o){o&&(h(e),h(s),h(r)),y(t),y(n)}}}function ze(l){let e,t;return e=new ue({props:{gap:"10",align:"center",$$slots:{default:[We]},$$scope:{ctx:l}}}),{c(){H(e.$$.fragment)},l(s){S(e.$$.fragment,s)},m(s,r){T(e,s,r),t=!0},p(s,r){const n={};r&1083&&(n.$$scope={dirty:r,ctx:s}),e.$set(n)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){v(e.$$.fragment,s),t=!1},d(s){y(e,s)}}}function Ie(l){let e,t,s,r,n;return t=new ce({props:{class:l[7].class,$$slots:{default:[ze]},$$scope:{ctx:l}}}),{c(){e=A("svelte-wrapper"),H(t.$$.fragment),this.h()},l(a){e=j(a,"SVELTE-WRAPPER",{class:!0});var o=C(e);S(t.$$.fragment,o),o.forEach(h),this.h()},h(){U(e,"class","svelte-ppj746")},m(a,o){w(a,e,o),T(t,e,null),l[9](e),s=!0,r||(n=oe(e,"click",l[6]),r=!0)},p(a,[o]){const f={};o&128&&(f.class=a[7].class),o&1083&&(f.$$scope={dirty:o,ctx:a}),t.$set(f)},i(a){s||(b(t.$$.fragment,a),s=!0)},o(a){v(t.$$.fragment,a),s=!1},d(a){a&&h(e),y(t),l[9](null),r=!1,n()}}}function Me(l,e,t){let s,r,n;const a=["user"];let o=Z(e,a),f;de(l,Re,i=>t(8,f=i));let{user:_}=e,m=0,d;D(()=>{const i=d==null?void 0:d.parentElement;i&&t(1,m=i.offsetWidth||0)});function E(){n?ne("/profile"):ne("/user",{userForId:_.meta.id})}function c(i){O[i?"unshift":"push"](()=>{d=i,t(2,d)})}return l.$$set=i=>{e=x(x({},e),$e(i)),t(7,o=Z(e,a)),"user"in i&&t(0,_=i.user)},l.$$.update=()=>{l.$$.dirty&1&&t(5,s=_.meta.userName),l.$$.dirty&1&&t(4,r=_.meta.photoLink),l.$$.dirty&257&&t(3,n=String(_.meta.id)===f.url.searchParams.get("userId"))},[_,m,d,n,r,s,E,o,f,c]}class Oe extends G{constructor(e){super(),J(this,e,Me,Ie,B,{user:0})}}function re(l,e,t){const s=l.slice();return s[22]=e[t],s}const qe=l=>({item:l&64}),le=l=>({item:l[22].data});function ae(l,e){let t,s,r;const n=e[14].default,a=be(n,e,e[13],le);return{key:l,first:null,c(){t=A("vl-row"),a&&a.c(),s=K(),this.h()},l(o){t=j(o,"VL-ROW",{class:!0});var f=C(t);a&&a.l(f),s=Q(f),f.forEach(h),this.h()},h(){U(t,"class","svelte-mwk0e5"),this.first=t},m(o,f){w(o,t,f),a&&a.m(t,null),fe(t,s),r=!0},p(o,f){e=o,a&&a.p&&(!r||f&8256)&&ve(a,n,e,e[13],r?He(n,e[13],f,qe):Ee(e[13]),le)},i(o){r||(b(a,o),r=!0)},o(o){v(a,o),r=!1},d(o){o&&h(t),a&&a.d(o)}}}function Fe(l){let e,t,s=[],r=new Map,n=`${l[4]}px`,a=`${l[5]}px`,o,f,_,m,d=te(l[6]);const E=c=>c[22].index;for(let c=0;c<d.length;c+=1){let i=re(l,d,c),p=E(i);r.set(p,s[c]=ae(p,i))}return{c(){e=A("vl-viewport"),t=A("vl-contents");for(let c=0;c<s.length;c+=1)s[c].c();this.h()},l(c){e=j(c,"VL-VIEWPORT",{class:!0});var i=C(e);t=j(i,"VL-CONTENTS",{class:!0});var p=C(t);for(let k=0;k<s.length;k+=1)s[k].l(p);p.forEach(h),i.forEach(h),this.h()},h(){U(t,"class","svelte-mwk0e5"),L(t,"padding-top",n),L(t,"padding-bottom",a),U(e,"class","svelte-mwk0e5"),ke(()=>l[17].call(e)),L(e,"height",l[0])},m(c,i){w(c,e,i),fe(e,t);for(let p=0;p<s.length;p+=1)s[p]&&s[p].m(t,null);l[15](t),l[16](e),o=Se(e,l[17].bind(e)),f=!0,_||(m=oe(e,"scroll",l[7]),_=!0)},p(c,[i]){i&8256&&(d=te(c[6]),Te(),s=Le(s,i,E,1,c,d,r,t,Ne,ae,null,re),ye()),i&16&&n!==(n=`${c[4]}px`)&&L(t,"padding-top",n),i&32&&a!==(a=`${c[5]}px`)&&L(t,"padding-bottom",a),i&1&&L(e,"height",c[0])},i(c){if(!f){for(let i=0;i<d.length;i+=1)b(s[i]);f=!0}},o(c){for(let i=0;i<s.length;i+=1)v(s[i]);f=!1},d(c){c&&h(e);for(let i=0;i<s.length;i+=1)s[i].d();l[15](null),l[16](null),o(),_=!1,m()}}}function Be(l,e,t){let s,{$$slots:r={},$$scope:n}=e,{items:a}=e,{itemHeight:o=0}=e,{height:f="100%"}=e,{end:_=0}=e,{start:m=0}=e,d=!1,E,c,i=0,p,k=[],I=0,q=0,N;async function _e(u,P,$){const{scrollTop:V}=p;await F();let W=I-V,g=m;for(;W<P&&g<u.length;){let z=c[g-m];z||(t(8,_=g+1),await F(),z=c[g-m]);const R=k[g]=$||z.offsetHeight;W+=R,g+=1}t(8,_=g);const M=u.length-_;N=(I+W)/_,t(5,q=M*N),k.length=u.length}async function me(){const{scrollTop:u}=p,P=m;for(let g=0;g<c.length;g+=1)k[m+g]=o||c[g].offsetHeight;let $=0,V=0;for(;$<a.length;){const g=k[$]||N;if(V+g>u){t(9,m=$),t(4,I=V);break}V+=g,$+=1}for(;$<a.length&&(V+=k[$]||N,$+=1,!(V>u+i)););t(8,_=$);const W=a.length-_;for(N=V/_;$<a.length;)k[$++]=N;if(t(5,q=W*N),m<P){await F();let g=0,M=0;for(let R=m;R<P;R+=1)c[R-m]&&(M+=k[R],g+=o||c[R-m].offsetHeight);const z=g-M;p.scrollTo(0,u+z)}}D(()=>{c=E.getElementsByTagName("vl-row"),t(12,d=!0)});function he(u){O[u?"unshift":"push"](()=>{E=u,t(2,E)})}function ge(u){O[u?"unshift":"push"](()=>{p=u,t(3,p)})}function pe(){i=this.offsetHeight,t(1,i)}return l.$$set=u=>{"items"in u&&t(10,a=u.items),"itemHeight"in u&&t(11,o=u.itemHeight),"height"in u&&t(0,f=u.height),"end"in u&&t(8,_=u.end),"start"in u&&t(9,m=u.start),"$$scope"in u&&t(13,n=u.$$scope)},l.$$.update=()=>{l.$$.dirty&1792&&t(6,s=a.slice(m,_).map((u,P)=>({index:P+m,data:u}))),l.$$.dirty&7170&&d&&_e(a,i,o)},[f,i,E,p,I,q,s,me,_,m,a,o,d,n,r,he,ge,pe]}class De extends G{constructor(e){super(),J(this,e,Be,Fe,B,{items:10,itemHeight:11,height:0,end:8,start:9})}}function Ge(l){let e,t;return e=new Oe({props:{user:l[4]}}),{c(){H(e.$$.fragment)},l(s){S(e.$$.fragment,s)},m(s,r){T(e,s,r),t=!0},p(s,r){const n={};r&16&&(n.user=s[4]),e.$set(n)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){v(e.$$.fragment,s),t=!1},d(s){y(e,s)}}}function Je(l){let e,t;return e=new De({props:{items:l[0],height:l[1]-10+"px",$$slots:{default:[Ge,({item:s})=>({4:s}),({item:s})=>s?16:0]},$$scope:{ctx:l}}}),{c(){H(e.$$.fragment)},l(s){S(e.$$.fragment,s)},m(s,r){T(e,s,r),t=!0},p(s,r){const n={};r&1&&(n.items=s[0]),r&2&&(n.height=s[1]-10+"px"),r&48&&(n.$$scope={dirty:r,ctx:s}),e.$set(n)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){v(e.$$.fragment,s),t=!1},d(s){y(e,s)}}}function Ke(l){let e,t,s;return t=new ce({props:{type:"main",$$slots:{default:[Je]},$$scope:{ctx:l}}}),{c(){e=A("div"),H(t.$$.fragment)},l(r){e=j(r,"DIV",{});var n=C(e);S(t.$$.fragment,n),n.forEach(h)},m(r,n){w(r,e,n),T(t,e,null),l[3](e),s=!0},p(r,[n]){const a={};n&35&&(a.$$scope={dirty:n,ctx:r}),t.$set(a)},i(r){s||(b(t.$$.fragment,r),s=!0)},o(r){v(t.$$.fragment,r),s=!1},d(r){r&&h(e),y(t),l[3](null)}}}function Qe(l,e,t){let{users:s}=e,r=0,n;D(()=>{var o;t(1,r=((o=n.parentElement)==null?void 0:o.offsetHeight)||0)});function a(o){O[o?"unshift":"push"](()=>{n=o,t(2,n)})}return l.$$set=o=>{"users"in o&&t(0,s=o.users)},[s,r,n,a]}class rt extends G{constructor(e){super(),J(this,e,Qe,Ke,B,{users:0})}}export{rt as U};
