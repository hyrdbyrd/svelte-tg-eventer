import{f as c,m as M,d as u,a as s,S as g,b as i,h as A,g as I}from"./Stack.svelte_svelte_type_style_lang.CUA6CrGc.js";function N(e){return{mark:e.rate,card:e.card,name:e.name,meetingId:e.id,eventId:e.eventId,userIds:e.userIds,meetingType:e.type,capacity:e.capacity,timeStart:e.timeStart,meetingStatus:e.status,description:e.description,meetingNote:e.meetingNote,organisatorId:e.organizatorId,telegramChatLink:e.telegramChatLink}}function o(e,t){return{queueType:t,rate:e.mark,card:e.card,name:e.name,id:e.meetingId,eventId:e.eventId,userIds:e.userIds,type:e.meetingType,capacity:e.capacity,timeStart:e.timeStart,status:e.meetingStatus,description:e.description,meetingNote:e.meetingNote,organizatorId:e.organisatorId,telegramChatLink:e.telegramChatLink}}const T=c(u,"NEW_AVAILABLE_MEETING").pipe(M(e=>o(e,"AVAILABLE"))),$=c(u,"SOME_MEETING_BECOME_UN_AVAILABLE").pipe(M(e=>o(e,"AVAILABLE"))),C=c(u,"METTING_END").pipe(M(e=>o(e,"MY"))),x=c(u,"METTING_BECOME_END").pipe(M(e=>o(e,"ENDED"))),S=c(u,"TRIGGER_MY_MEETING").pipe(M(e=>o(e,"MY"))),F=c(u,"MEETING_UPDATED"),_={REJECTED:"REJECTED",ACCEPTED:"ACCEPTED",AWAITING_RESPONSE:"AWAITING_RESPONSE"};function L(e,t){return s.get(`/meeting/get_user_meetings/${e}/${t}`).then(n=>n.data).then(n=>n.map(a=>o(a,"MY")))}function R(e,t){return s.get(`/meeting/ended_user_meetings/${e}/${t}`).then(n=>n.data).then(n=>n.map(a=>o(a,"ENDED")))}function k(e,t){return s.get(`/meeting/get_available_custom_meetings/${e}/${t}`).then(n=>n.data).then(n=>n.map(a=>o(a,"AVAILABLE")))}function b(e){return s.post(`/meeting/create_custom_meeting/${e.eventId}`,N(e)).then(t=>t.data).then(t=>o(t,"MY"))}function y(e,t,n,a,r){return s.post(`/meeting/mark/${e}`,{mark:a,userId:t,eventId:e,meetingId:n,meetingNote:r}).then(p=>p.data)}function B(e,t,n){return s.post(`/meeting/join_meeting/${e}/${t}`,{userId:t,eventId:e,meetingId:n}).then(a=>a.data).then(a=>o(a,"MY"))}function G(e,t,n){return s.post(`/meeting/mark_meeting_finished/${e}`,{eventId:e,userId:t,meetingId:n}).then(()=>n)}function q(e,t,n){return s.post(`/meeting/meeting_not_happend/${e}/${t}`,{eventId:e,userId:t,meetingId:n}).then(()=>n)}function U(e,t,n){return s.post(`/meeting/left_meeting/${e}/${t}`,{userId:t,eventId:e,meetingId:n}).then(()=>({meetingId:n}))}function v(e,t,n){return s.get(`/meeting/can_send_meeting_request/${e}/${t}/${n}`).then(a=>a.data)}function Y(e,t,n){return s.post(`/meeting/${e}/send_meeting_request`,{eventId:e,idTo:n,idFrom:t,status:_.AWAITING_RESPONSE}).then(a=>a.data).then(a=>o(a,"MY"))}function l(e,t,n,a){return s.post(`/meeting/${e}/answer_meeting_request`,{eventId:e,idTo:n,idFrom:t,status:a?_.ACCEPTED:_.REJECTED}).then(r=>r.data)}const P=g(C),f=g(F),O=g(x),V=g(S),j=g(T),w=g($),J=i(({userId:e,eventId:t})=>L(t,e)),W=i(({userId:e,eventId:t})=>R(t,e)),ie=i(({userId:e,eventId:t,meetingId:n})=>q(t,e,n)),oe=i(({eventId:e,userId:t,meetingId:n})=>G(e,t,n)),z=i(({eventId:e,userId:t,meetingId:n,mark:a,meetingNote:r})=>y(e,t,n,a,r)),D=i(({eventId:e,userId:t,meetingId:n})=>B(e,t,n)),H=i(({eventId:e,userId:t,meetingId:n})=>U(e,t,n)),K=i(({userId:e,eventId:t})=>k(t,e)),se=i(({eventId:e,userFromId:t,userToId:n})=>v(e,t,n)),Q=i(({eventId:e,userFromId:t,userToId:n})=>Y(e,t,n)),X=i(({eventId:e,userFromId:t,userToId:n})=>l(e,t,n,!0)),h=i(({eventId:e,userFromId:t,userToId:n})=>l(e,t,n,!1)),Z=i(b);function E(e,t){const n=e.findIndex(a=>a.id===t);return n!==-1?e.toSpliced(n,1):e}function m(e,t,n){const a=e.findIndex(r=>r.id===t.meetingId);return a!==-1?(e[a]=o(t,n),[...e]):e}function d(e,t){const n=e.findIndex(a=>a.id===t.id);return n!==-1?(e[n]=t,[...e]):[t,...e]}const ee=A([],{name:"availableMeetings"}).on(j,(e,t)=>d(e,t)).on(K.doneData,(e,t)=>t).on(D.doneData,(e,t)=>E(e,t.id)).on(f,(e,t)=>m(e,t,"AVAILABLE")).on(w,(e,t)=>E(e,t.id)),te=A([],{name:"myMeetings"}).on(J.doneData,(e,t)=>t).on(f,(e,t)=>m(e,t,"MY")).on(V,(e,t)=>d(e,t)).on(D.doneData,(e,t)=>d(e,t)).on(P,(e,t)=>E(e,t.id)).on(H.doneData,(e,{meetingId:t})=>E(e,Number(t))).on(Z.doneData,(e,t)=>d(e,t)).on(Q.doneData,(e,t)=>d(e,t)).on(X.doneData,(e,t)=>m(e,{...t,meetingStatus:"ACCEPTED"},"MY")).on(h.doneData,(e,t)=>E(e,t.meetingId)),ne=A([],{name:"endedMeetings"}).on(O,(e,t)=>d(e,t)).on(W.doneData,(e,t)=>t).on(f,(e,t)=>m(e,t,"ENDED")).on(h.doneData,(e,t)=>d(e,o({...t,meetingStatus:"REJECTED"},"ENDED"))).on(z.doneData,(e,{mark:t,meetingId:n,meetingNote:a})=>{const r=e.findIndex(p=>p.id===n);return r!==-1?(e[r]={...e[r],rate:t,meetingNote:a},[...e]):e}),re=I(ee,te,ne,(e,t,n)=>e.concat(t,n));export{re as a,Z as b,se as c,W as d,ne as e,K as f,J as g,X as h,oe as i,D as j,ie as k,H as l,z as m,te as n,ee as o,h as r,Q as s,V as t};
