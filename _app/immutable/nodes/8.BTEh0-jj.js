import{s as R,e as Y,f as Z,g as he,p as pe,o as le,h as de,u as $e,i as ke,j as we,t as D,b as G,c as ae}from"../chunks/scheduler.B2bB6zJV.js";import{S as U,i as W,k as b,l as v,m as H,n as $,o as k,p as S,s as J,f as K,g as T,d as p,t as Q,b as X,j as be,q as x,e as j,c as q,a as A,y as F,z as P,h as ie,G as ve,u as He,v as Se,r as Ce}from"../chunks/index.Dd9f2Vrx.js";import{a as Te}from"../chunks/UserAvatarsList.svelte_svelte_type_style_lang.CgKY2wda.js";import"../chunks/Stack.svelte_svelte_type_style_lang.q35J2cnn.js";/* empty css                                                      */import{S as oe}from"../chunks/Section.BXLuDw1S.js";import{A as ye,e as ee,u as Ee,o as Le}from"../chunks/Avatar.CKWzUCiJ.js";import{S as fe,T as te}from"../chunks/Stack.RC-DKkti.js";import{p as Ne}from"../chunks/stores.DOmZsd_K.js";function Ve(l){let e;return{c(){e=Q(l[0])},l(s){e=X(s,l[0])},m(s,t){T(s,e,t)},p(s,t){t&1&&be(e,s[0])},d(s){s&&p(e)}}}function Pe(l){let e;return{c(){e=Q("Оффлайн")},l(s){e=X(s,"Оффлайн")},m(s,t){T(s,e,t)},d(s){s&&p(e)}}}function ze(l){let e;return{c(){e=Q("Это вы")},l(s){e=X(s,"Это вы")},m(s,t){T(s,e,t)},d(s){s&&p(e)}}}function Ie(l){let e;function s(n,a){return n[1]?ze:Pe}let t=s(l),r=t(l);return{c(){r.c(),e=x()},l(n){r.l(n),e=x()},m(n,a){r.m(n,a),T(n,e,a)},p(n,a){t!==(t=s(n))&&(r.d(1),r=t(n),r&&(r.c(),r.m(e.parentNode,e)))},d(n){n&&p(e),r.d(n)}}}function Me(l){let e,s,t,r;return e=new te({props:{role:"main",$$slots:{default:[Ve]},$$scope:{ctx:l}}}),t=new te({props:{role:"secondary",$$slots:{default:[Ie]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),s=J(),b(t.$$.fragment)},l(n){v(e.$$.fragment,n),s=K(n),v(t.$$.fragment,n)},m(n,a){H(e,n,a),T(n,s,a),H(t,n,a),r=!0},p(n,a){const o={};a&17&&(o.$$scope={dirty:a,ctx:n}),e.$set(o);const i={};a&18&&(i.$$scope={dirty:a,ctx:n}),t.$set(i)},i(n){r||($(e.$$.fragment,n),$(t.$$.fragment,n),r=!0)},o(n){k(e.$$.fragment,n),k(t.$$.fragment,n),r=!1},d(n){n&&p(s),S(e,n),S(t,n)}}}function Oe(l){let e,s,t,r;return e=new ye({props:{src:l[2]}}),t=new fe({props:{direction:"vertical",$$slots:{default:[Me]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),s=J(),b(t.$$.fragment)},l(n){v(e.$$.fragment,n),s=K(n),v(t.$$.fragment,n)},m(n,a){H(e,n,a),T(n,s,a),H(t,n,a),r=!0},p(n,a){const o={};a&4&&(o.src=n[2]),e.$set(o);const i={};a&19&&(i.$$scope={dirty:a,ctx:n}),t.$set(i)},i(n){r||($(e.$$.fragment,n),$(t.$$.fragment,n),r=!0)},o(n){k(e.$$.fragment,n),k(t.$$.fragment,n),r=!1},d(n){n&&p(s),S(e,n),S(t,n)}}}function je(l){let e,s;return e=new fe({props:{gap:"10",$$slots:{default:[Oe]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,r){H(e,t,r),s=!0},p(t,r){const n={};r&23&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){S(e,t)}}}function qe(l){let e,s;return e=new oe({props:{class:l[3].class,$$slots:{default:[je]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,r){H(e,t,r),s=!0},p(t,[r]){const n={};r&8&&(n.class=t[3].class),r&23&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){S(e,t)}}}function Ae(l,e,s){const t=["name","isCurrent","src"];let r=Y(e,t),{name:n}=e,{isCurrent:a=!1}=e,{src:o}=e;return l.$$set=i=>{e=Z(Z({},e),he(i)),s(3,r=Y(e,t)),"name"in i&&s(0,n=i.name),"isCurrent"in i&&s(1,a=i.isCurrent),"src"in i&&s(2,o=i.src)},[n,a,o,r]}class Re extends U{constructor(e){super(),W(this,e,Ae,qe,R,{name:0,isCurrent:1,src:2})}}function se(l,e,s){const t=l.slice();return t[22]=e[s],t}const Ue=l=>({item:l&64}),ne=l=>({item:l[22].data});function re(l,e){let s,t,r;const n=e[14].default,a=de(n,e,e[13],ne);return{key:l,first:null,c(){s=j("vl-row"),a&&a.c(),t=J(),this.h()},l(o){s=q(o,"VL-ROW",{class:!0});var i=A(s);a&&a.l(i),t=K(i),i.forEach(p),this.h()},h(){F(s,"class","svelte-mwk0e5"),this.first=s},m(o,i){T(o,s,i),a&&a.m(s,null),ie(s,t),r=!0},p(o,i){e=o,a&&a.p&&(!r||i&8256)&&$e(a,n,e,e[13],r?we(n,e[13],i,Ue):ke(e[13]),ne)},i(o){r||($(a,o),r=!0)},o(o){k(a,o),r=!1},d(o){o&&p(s),a&&a.d(o)}}}function We(l){let e,s,t=[],r=new Map,n=`${l[4]}px`,a=`${l[5]}px`,o,i,h,_,C=ee(l[6]);const E=f=>f[22].index;for(let f=0;f<C.length;f+=1){let c=se(l,C,f),g=E(c);r.set(g,t[f]=re(g,c))}return{c(){e=j("vl-viewport"),s=j("vl-contents");for(let f=0;f<t.length;f+=1)t[f].c();this.h()},l(f){e=q(f,"VL-VIEWPORT",{class:!0});var c=A(e);s=q(c,"VL-CONTENTS",{class:!0});var g=A(s);for(let w=0;w<t.length;w+=1)t[w].l(g);g.forEach(p),c.forEach(p),this.h()},h(){F(s,"class","svelte-mwk0e5"),P(s,"padding-top",n),P(s,"padding-bottom",a),F(e,"class","svelte-mwk0e5"),pe(()=>l[17].call(e)),P(e,"height",l[0])},m(f,c){T(f,e,c),ie(e,s);for(let g=0;g<t.length;g+=1)t[g]&&t[g].m(s,null);l[15](s),l[16](e),o=ve(e,l[17].bind(e)),i=!0,h||(_=He(e,"scroll",l[7]),h=!0)},p(f,[c]){c&8256&&(C=ee(f[6]),Se(),t=Ee(t,c,E,1,f,C,r,s,Le,re,null,se),Ce()),c&16&&n!==(n=`${f[4]}px`)&&P(s,"padding-top",n),c&32&&a!==(a=`${f[5]}px`)&&P(s,"padding-bottom",a),c&1&&P(e,"height",f[0])},i(f){if(!i){for(let c=0;c<C.length;c+=1)$(t[c]);i=!0}},o(f){for(let c=0;c<t.length;c+=1)k(t[c]);i=!1},d(f){f&&p(e);for(let c=0;c<t.length;c+=1)t[c].d();l[15](null),l[16](null),o(),h=!1,_()}}}function Be(l,e,s){let t,{$$slots:r={},$$scope:n}=e,{items:a}=e,{itemHeight:o=0}=e,{height:i="100%"}=e,{end:h=0}=e,{start:_=0}=e,C=!1,E,f,c=0,g,w=[],M=0,B=0,L;async function ce(u,V,d){const{scrollTop:y}=g;await D();let z=M-y,m=_;for(;z<V&&m<u.length;){let I=f[m-_];I||(s(8,h=m+1),await D(),I=f[m-_]);const N=w[m]=d||I.offsetHeight;z+=N,m+=1}s(8,h=m);const O=u.length-h;L=(M+z)/h,s(5,B=O*L),w.length=u.length}async function ue(){const{scrollTop:u}=g,V=_;for(let m=0;m<f.length;m+=1)w[_+m]=o||f[m].offsetHeight;let d=0,y=0;for(;d<a.length;){const m=w[d]||L;if(y+m>u){s(9,_=d),s(4,M=y);break}y+=m,d+=1}for(;d<a.length&&(y+=w[d]||L,d+=1,!(y>u+c)););s(8,h=d);const z=a.length-h;for(L=y/h;d<a.length;)w[d++]=L;if(s(5,B=z*L),_<V){await D();let m=0,O=0;for(let N=_;N<V;N+=1)f[N-_]&&(O+=w[N],m+=o||f[N-_].offsetHeight);const I=m-O;g.scrollTo(0,u+I)}}le(()=>{f=E.getElementsByTagName("vl-row"),s(12,C=!0)});function me(u){G[u?"unshift":"push"](()=>{E=u,s(2,E)})}function _e(u){G[u?"unshift":"push"](()=>{g=u,s(3,g)})}function ge(){c=this.offsetHeight,s(1,c)}return l.$$set=u=>{"items"in u&&s(10,a=u.items),"itemHeight"in u&&s(11,o=u.itemHeight),"height"in u&&s(0,i=u.height),"end"in u&&s(8,h=u.end),"start"in u&&s(9,_=u.start),"$$scope"in u&&s(13,n=u.$$scope)},l.$$.update=()=>{l.$$.dirty&1792&&s(6,t=a.slice(_,h).map((u,V)=>({index:V+_,data:u}))),l.$$.dirty&7170&&C&&ce(a,c,o)},[i,c,E,g,M,B,t,ue,h,_,a,o,C,n,r,me,_e,ge]}class De extends U{constructor(e){super(),W(this,e,Be,We,R,{items:10,itemHeight:11,height:0,end:8,start:9})}}function Ge(l){let e,s;return e=new Re({props:{name:l[5].meta.userName,src:l[5].meta.photoLink||"",isCurrent:String(l[5].meta.id)===l[3].url.searchParams.get("urlId")}}),{c(){b(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,r){H(e,t,r),s=!0},p(t,r){const n={};r&32&&(n.name=t[5].meta.userName),r&32&&(n.src=t[5].meta.photoLink||""),r&40&&(n.isCurrent=String(t[5].meta.id)===t[3].url.searchParams.get("urlId")),e.$set(n)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){S(e,t)}}}function Fe(l){let e,s;return e=new De({props:{items:l[0],height:l[1]-10+"px",$$slots:{default:[Ge,({item:t})=>({5:t}),({item:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,r){H(e,t,r),s=!0},p(t,r){const n={};r&1&&(n.items=t[0]),r&2&&(n.height=t[1]-10+"px"),r&104&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){S(e,t)}}}function Je(l){let e,s,t;return s=new oe({props:{type:"main",$$slots:{default:[Fe]},$$scope:{ctx:l}}}),{c(){e=j("div"),b(s.$$.fragment)},l(r){e=q(r,"DIV",{});var n=A(e);v(s.$$.fragment,n),n.forEach(p)},m(r,n){T(r,e,n),H(s,e,null),l[4](e),t=!0},p(r,[n]){const a={};n&75&&(a.$$scope={dirty:n,ctx:r}),s.$set(a)},i(r){t||($(s.$$.fragment,r),t=!0)},o(r){k(s.$$.fragment,r),t=!1},d(r){r&&p(e),S(s),l[4](null)}}}function Ke(l,e,s){let t;ae(l,Ne,i=>s(3,t=i));let{users:r}=e,n=0,a;le(()=>{var i;s(1,n=((i=a.parentElement)==null?void 0:i.offsetHeight)||0)});function o(i){G[i?"unshift":"push"](()=>{a=i,s(2,a)})}return l.$$set=i=>{"users"in i&&s(0,r=i.users)},[r,n,a,t,o]}class Qe extends U{constructor(e){super(),W(this,e,Ke,Je,R,{users:0})}}function Xe(l){let e,s;return e=new Qe({props:{users:l[0]}}),{c(){b(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,r){H(e,t,r),s=!0},p(t,[r]){const n={};r&1&&(n.users=t[0]),e.$set(n)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){S(e,t)}}}function Ye(l,e,s){let t;return ae(l,Te,r=>s(0,t=r)),[t]}class it extends U{constructor(e){super(),W(this,e,Ye,Xe,R,{})}}export{it as component};
